#!/bin/sh

KVERSION=$(uname -r)

# Install below packages first.
# sudo apt-get install libnl-3-200 libnl-3-dev
# sudo apt-get install libnl-genl-3-200 libnl-genl-3-dev

sudo insmod /lib/modules/$KVERSION/kernel/net/wireless/cfg80211.ko
sudo insmod /lib/modules/$KVERSION/kernel/net/wireless/lib80211.ko
sudo insmod /lib/modules/$KVERSION/kernel/net/wireless/lib80211_crypt_ccmp.ko
sudo insmod /lib/modules/$KVERSION/kernel/net/wireless/lib80211_crypt_tkip.ko
sudo insmod /lib/modules/$KVERSION/kernel/net/wireless/lib80211_crypt_wep.ko
sudo insmod /lib/modules/$KVERSION/kernel/net/mac80211/mac80211.ko
sudo insmod /lib/modules/$KVERSION/kernel/drivers/net/wireless/mac80211_hwsim.ko

# gcc -I/usr/include/libnl3 -o leak_mac_hwsim leak_mac_hwsim.c -lnl-3 -lnl-genl-3

